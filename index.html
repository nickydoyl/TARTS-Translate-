<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Auto Worker Test</title>
  <style>
    body { background:#0f172a; color:#e2e8f0; font-family:sans-serif; text-align:center; padding:30px;}
    h1{color:#60a5fa;}
    #log{background:#1e293b;padding:15px;border-radius:8px;width:90%;max-width:600px;margin:20px auto;text-align:left;height:300px;overflow:auto;}
  </style>
</head>
<body>
  <h1>Auto Worker Test</h1>
  <div id="log">Initializing...</div>

  <script>
    const WORKER_URL = "wss://broad-hat-1325.nickydoyl.workers.dev";
    const logDiv = document.getElementById("log");

    function log(msg){
      const t = new Date().toLocaleTimeString();
      logDiv.innerHTML += `[${t}] ${msg}<br>`;
      logDiv.scrollTop = logDiv.scrollHeight;
      console.log(msg);
    }

    function testConnection(){
      log("üöÄ Starting automatic test...");
      try {
        const ws = new WebSocket(WORKER_URL);
        ws.onopen = () => log("‚úÖ WebSocket connected");
        ws.onerror = e => log("‚ùå Error: " + (e.message || JSON.stringify(e)));
        ws.onclose = e => log(`üîí Closed: code=${e.code}, reason=${e.reason || "none"}`);
      } catch (err) {
        log("üö´ Failed: " + err.message);
      }
    }

    window.onload = () => {
      log("üåê Page loaded - auto test beginning in 1s...");
      setTimeout(testConnection, 1000);
      setInterval(testConnection, 10000); // repeat every 10 seconds
    };
  </script>
</body>
</html>